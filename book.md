# PHP 内外兼修

## 序言

天下武功为快不破，当你快到一定程度的时候，对手对你的招式就无从招架防范了。但是这是要有很高的修为的。武侠小说里，武功都需要内外兼修，只有内力，没有招式，就是空有力量使不出去，只有招式，没有内力，就像花架子，经不起比拼。
学习 php 和其他的任何语言也是一样，我们不但要学习内功，外功也要学习，做到内外兼修，我们才能运用 php，无敌于天下。


## 第一章（php 内功-环境搭建）

学习一门语言第一件事是什么？是学习语法？我感觉最重要最应该先学的是如何搭建环境，输出个“hello world”.因为无论你学习语法，还是其他变量等知识，都需要实践来学习。所以我们需要搭建环境来更好地学习。

说到环境，首先就有个平台的区分，一个是 windows 平台，一个是 linux 平台。对于入门，我推荐使用集成环境来学习，这样可以最快速的搭建好环境，增加成就感，对学习产生动力。我看到很多自学 php 的人，因为搭建了 2-3 天的环境没有搭建好，就放弃学习的，其实 php 环境搭建对于高手来说很容易，但是对于新手，确实有一定的难度，因为很多学习 php 的人，他之前基本没学过其他语言，或者学了其他的语言，也只是在编辑器里运行了，根本没有搭建环境的经历。

如果你是 windows 平台，推荐使用 phpstudy 集成环境，网上搜索 phpstudy 就能找到官网，可以下载压缩包，解压就可以使用了。也可以下载 exe 文件，点击下一步，下一步，就安装了。

安装好后，这个是 phpstudy 的启动界面，我们点击启动，当 apache,mysql 状态图标都变绿了，我们的环境就可以使用了。

在浏览器中输入 127.0.0.1

当你看到下面的页面，恭喜你，你已经走进 php 大门了，接下来就是参观它无比绚烂的宫殿了。

如果你是 linux 平台，百度搜索 lamp 就可以找到 lamp 集成环境包

下载 zip 压缩包，然后进行解压，解压后，进入文件夹，里面有 install.sh 执行这个命令，就可以按照提示安装了。

### 第二章（PHP 内功-基本语法）

学习编程语言，都要学习它的基本语法，php 的基本语法很好学，因为它没有那么多复杂的变量定义，甚至可以直接对未声明的变量来进行操作。

php 输出语句使用`echo`，比如学习一门语言，最基本的都是打出 `hello world`.

```php
<?php
echo "hello world";
?>
```

这样就输出了世界你好，当然我们还可以将 `hello word` 定义成变量，这样我们可以控制我们想要输出的内容。

```php

<?php
$str = "hello world";
echo $str;
?>

```

这里我们定义了一个变量 `$str`，记住，php 中的变量都是用$符号开始的，也许它是想告诉我们，学习了 php，我们就会变的很有钱。

```php

<?php
$str = "我是中国人";
echo $str;
?>

```

当我们修改 `$str` 变量的时候，输出的内容也会发生变化，上面的语句会输出，我是中国人。

当我们要输出一个句子很多遍的时候，我们可能会想到下面的办法。


```php

<?php
$str = "hello wolrd";
echo $str;
echo $str;
echo $str;
echo $str;
?>


```

这样我们就输出了 4 遍 hello world，但是如果要输入 100 遍，1000 遍的时候，我估计这种办法会累死，幸好我们有其他的解决办法，就是 php 中的循环语句。比如还是要输出 4 次 `hello world`.

```php

<?php
$str = "hello world";
for($i=0;$i<4;$i++)
{
	echo $str;
}
?>


```

这么写，我们就输出了 4 次 `hello world`，如果我们想输出 1000 遍 `hello world`，我们只要将 4 改成 1000 就 ok 了，这就是程序员做的工作，也是程序做的工作，重复复杂的事情，交给电脑来计算运行，我们只要告诉它怎么运行就好。

上面的例子中，我们无形之中就使用了 php 的控制结构 for,当然 php 还有其他的控制结构，我们会在后面一一说明。
比如还是刚才的例子，我们要求每当输出 3 个 hello world 后，我们要在输入一个 welcome to beijing.怎么办呢？我们就可以使用 if 语句，就是用来判断的

<?Php
for($i =0; $i<1000;$i++){
if($i%4==0){
echo “hello world”;
} else {
echo “welcome to beijing”;
}
}
?>

这里面有个两个新的知识点，一个是 if else 判断，一个%，这里%表示取余的意思，比如 100%4 = 0;   5%4 =1;表示余数分别是 0，1.

**学习名言：编程一定要多敲代码练习，掌握手感，就跟打篮球一样，手感有了，怎么投怎么进，编程的手感来了，你会感觉，手指在替你思考。**

还是循环输出 4 遍“hello world”,这次我们使用 while 来进行，体验编程就是你可以有很多方法来完成目的，只要你的方式省时间，易懂，就是一个好的程序。


```php
<?php
$i = 0;
while($i!=4){
$i++;
echo “hello world”;
}
```

这里有两个知识点，一个是 while 来循环，一个是$i++表示变量$i 进行加一操作。这样程序就会从 0 到 3 循环四次。
这样我们就通过 while 循环了 4 次，现在我们知道了循环，还有判断语句，我们就可以做一些东西有趣的东西了，比如我们可以做一个猜数字游戏，就是我们设定一个 1-100 之间的树，然后让其他人猜，然后告诉他大了，还是小了，来帮助它找到那个数字，看他猜到数字用了多少次。
<?php
$i = 39;
echo "请输入一个数字";
$num = trim(fgets(STDIN));

caishuzi($num);

function caishuzi($num) {
	global $i;
	if ($num < $i) {
		echo "你猜的数字小了、r\n";
		echo "请输入一个数字、r\n";
		$num = trim(fgets(STDIN));
		caishuzi($num);
	} else if ($num == $i) {
		echo "你猜对了";
	} else {
		echo "你猜的数字大了、r\n";
		echo "请输入一个数字、r\n";
		$num = trim(fgets(STDIN));
		caishuzi($num);
	}
}
?>

上面这个例子就是猜数字的游戏，很多语言都会有这个。现面我们说下都用到了哪些知识点。第一我们使用了函数 function，那么什么是函数呢？简单说，就是封装了一个功能，然后我们可以重复使用这个功能的一个代码段，比如我们定义一个加法函数，那么我们就可以通过这个函数，重复计算 2 个数的加法。
<?php
function sum($a, $b) {
	return $a + $b;
}

$c = sum(1, 5);
echo $c;
$c = sum(8,9);
echo $c;
?>
我们通过 sum 这个函数，就可以重复计算 2 个数的和。

函数 fgets 的作用是获取文件的一行，STDIN 是文件句柄，他获取的就是标准输入流，因此，通过 fgets(STDIN)就可以接收控制台用户的输入。

global $i 这个是全局变量的声明，全局变量就是当我们想要使用一个变量，又不想通过函数的参数传入，我们就可以生命全局变量，这样我们就不通过函数参数来进行变量的修改。

通过上面的学习，我们知道了基本变量的概念，基本分支结构，基本循环结构，也知道了函数的概念，接下来我们说下对象的概念。面向对象编程是高级语言编程的核心概念。过去 c 语言的编程还有 php4 版本的编程都是面向过程的，随后为了软件开发的质量和可用性，可维护性，php5 引入了面向对象的概念。下面简单介绍下什么是面向对象。

面向对象：首先他是一种软件编程方法，就是将开发看成是对象的方法调用，各个功能模块被封装成到具体的类中，通过调用类中的方法，我们可以实现相应的功能和访问对象中的属性。它的三点特性就是封装，继承，多态。

下面举个实际中的例子方便我们理解。比如我们可以将手表看成一个类，他有指针，表盘，电池，表壳等一些列属性，他有显示时间的方法。我们买了一个表，就相当于创建了一个对象，就可以使用它的方法，比如我们看时间，就调用了它的显示时间方法。同理我们买了一个电视，就可以调用看电视的方法。
接下来我们分别解释他的三个特点。

封装：顾名思义，就是把东西包装起来，不让你随意访问它的内部，比如，我们一般不拆手表去看他的内部结构，因为我们使用他的方法就足够了，所以封装就是隐藏一些东西，集合一些东西，让后暴漏一些东西。

继承：继承是面向对象编程中的一个重要概念，它指的是一个类（称为子类或派生类）可以继承另一个类（称为父类或基类）的属性和方法。子类在继承父类的同时可以添加自己的属性和方法，也可以重写父类的方法。

通过继承，子类可以获得父类的所有公共属性和方法，并且可以重用这些代码，从而提高代码的可重用性和可维护性。此外，继承还可以实现多态，即同一个方法在不同的子类中具有不同的实现。

在继承中，父类中定义的属性和方法称为基类成员，而子类中添加的成员称为派生类成员。继承关系可以形成一个层次结构，使得子类可以继承父类的所有属性和方法，父类可以作为模板来定义一些通用的行为和属性，而子类可以根据自己的需要来扩展和修改这些行为和属性。

多态: 多态是面向对象编程中的一个重要概念，它指的是在不同的对象上调用同一个方法时，该方法会根据对象的不同而执行不同的行为。换句话说，多态允许我们使用一个通用的接口来表示不同的对象，而不必关心它们的具体类型。

多态的实现方式有多种，其中最常见的是通过继承来实现。在继承中，子类可以重写父类的方法，并根据自己的需要来实现不同的行为。当我们在调用该方法时，程序会根据实际的对象类型来决定调用哪个方法，从而实现多态。

除了通过继承来实现多态外，还可以通过接口和抽象类来实现多态。在这种情况下，不同的类实现了同一个接口或继承了同一个抽象类，从而可以在运行时调用相同的方法。

多态是面向对象编程中一个非常强大的概念，它可以使代码更加灵活，可扩展和可维护，同时也提高了代码的可重用性和可读性。


以下是一个 PHP 代码示例，展示了继承、封装和多态的用法：

```php
<?php
// 定义一个基类 Animal
class Animal {
    private $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function getName() {
        return $this->name;
    }

    public function makeSound() {
        echo "Animal makes sound";
    }
}

// 定义一个继承自 Animal 的子类 Cat
class Cat extends Animal {
    public function makeSound() {
        echo "Meow";
    }
}

// 定义一个继承自 Animal 的子类 Dog
class Dog extends Animal {
    public function makeSound() {
        echo "Woof";
    }
}

// 定义一个使用多态的函数
function animalMakeSound(Animal $animal) {
    $animal->makeSound();
}

// 创建一个 Cat 对象，并调用 makeSound() 方法
$cat = new Cat("Kitty");
echo $cat->getName() . " says: ";
$cat->makeSound();

// 创建一个 Dog 对象，并调用 makeSound() 方法
$dog = new Dog("Buddy");
echo $dog->getName() . " says: ";
$dog->makeSound();

// 使用多态调用 makeSound() 方法
$animals = [$cat, $dog];
foreach ($animals as $animal) {
    echo $animal->getName() . " says: ";
    animalMakeSound($animal);
}
```

在上面的示例中，我们首先定义了一个基类 `Animal`，它包含一个私有属性 `$name` 和两个公共方法 `getName()` 和 `makeSound()`。然后我们定义了两个继承自 `Animal` 的子类 `Cat` 和 `Dog`，每个子类都重写了基类中的 `makeSound()` 方法。

接着我们定义了一个使用多态的函数 `animalMakeSound()`，它接受一个 `Animal` 类型的参数，并调用该对象的 `makeSound()` 方法。在最后的代码中，我们创建了一个 `Cat` 对象和一个 `Dog` 对象，并调用它们各自的 `makeSound()` 方法。然后我们将它们存储在一个数组中，并使用 `animalMakeSound()` 函数来调用它们的 `makeSound()` 方法。由于 `Cat` 和 `Dog` 类都是继承自 `Animal` 类的，因此它们可以被当作 `Animal` 类型的对象来处理，从而实现了多态。


## 字符串操作

php 之所以被众多人使用来开发网站，一个重要的原因就是它在处理字符串方面非常的方便和强大，接下来我们主要介绍下php的字符串处理功能。

### 字符串截取

可以使用substr()函数来截取字符串的一部分。该函数需要传入3个参数，第一个参数是要截取的字符串，第二个参数是截取的起始位置，第三个参数是截取的长度。例如：

```php
<?php
$str = "Hello, world!";
$new_str = str_replace("world", "PHP", $str); // 输出 "Hello, PHP!"
```

### 字符串连接

可以使用"."运算符或者concat()函数来连接两个字符串。例如：

```php
<?php
$str1 = "Hello";
$str2 = "world!";
$str3 = $str1 . " " . $str2; // 输出 "Hello world!"
$str4 = concat($str1, " ", $str2); // 输出 "Hello world!"
```

### 字符串替换

可以使用str_replace()函数来替换字符串中的某些字符或子串。该函数需要传入3个参数，第一个参数是要替换的字符或子串，第二个参数是替换成的字符或子串，第三个参数是要替换的字符串。例如：

```php
<?php
$str = "Hello, world!";
$new_str = str_replace("world", "PHP", $str); // 输出 "Hello, PHP!"
```

### 字符串查找

可以使用strpos()函数来查找字符串中的某个子串。该函数需要传入2个参数，第一个参数是要查找的字符串，第二个参数是要查找的子串。如果找到了，则返回该子串在字符串中的位置。例如：

```php
<?php

$str = "Hello, world!";
$pos = strpos($str, "world"); // 输出 7
```

### 字符串大小写转换

可以使用strtolower()函数将字符串转换为小写，也可以使用strtoupper()函数将字符串转换为大写。例如：

```php
<?php
$str = "Hello, world!";
$new_str1 = strtolower($str); // 输出 "hello, world!"
$new_str2 = strtoupper($str); // 输出 "HELLO, WORLD!"
```

### 其它字符串函数

#### 字符串长度

strlen()函数用于返回字符串的长度，即字符数。例如：

```php

<?php
$str = "Hello, world!";
$len = strlen($str); // 输出 13

```

#### 去除空格

trim()函数用于去除字符串两端的空格或指定字符。例如：

```php

<?php

$str = "  Hello, world!  ";
$new_str1 = trim($str); // 输出 "Hello, world!"
$new_str2 = trim($str, " !"); // 输出 "Hello, world"


```

#### 字符串比较
strcmp()函数用于比较两个字符串的大小关系。该函数返回一个整数，如果字符串相等，则返回0；如果字符串不相等，则返回-1或1。例如：

```php
<?php

$str1 = "Hello";
$str2 = "hello";
$result = strcmp($str1, $str2); // 输出 -1

```

#### 字符串分割
explode()函数用于将字符串按照指定的分隔符分割成数组。例如：

```php
<?php
$str = "apple,banana,orange";
$arr = explode(",", $str); // 输出 ["apple","banana", "orange"]

```

#### 字符串格式化
sprintf()函数用于将字符串按照指定的格式进行格式化。例如：

```php
<?php
$number = 123.45;
$str = sprintf("The number is %.2f", $number); // 输出 "The number is 123.45"

```

#### 字符串重复
str_repeat()函数用于将字符串重复指定的次数。例如：

```php

<?php
$str = "Hello";
$new_str = str_repeat($str, 3); // 输出 "HelloHelloHello"
```

#### 字符串填充
str_pad()函数用于将字符串按照指定的长度进行填充。例如：

```php
<?php


$str = "Hello";
$new_str = str_pad($str, 10, "-"); // 输出 "Hello-----"

```

#### HTML转义
htmlspecialchars()函数用于将字符串中的HTML特殊字符转义。例如：

```php
<?php

$str = "<p>Hello, world!</p>";

$new_str = htmlspecialchars($str); // 输出 "&lt;p&gt;Hello, world!&lt;/p&gt;"
```

#### 其它

##### 字符串查找
stripos() 函数用于在字符串中查找第一次出现的子串（不区分大小写），返回子串在字符串中的位置。
strstr() 函数用于在字符串中查找第一次出现的子串（区分大小写），返回子串在字符串中的位置及其后面的所有字符。

##### 字符串替换

str_replace() 函数用于将字符串中的某些字符或子串替换成指定的字符或子串。
str_ireplace() 函数用于将字符串中的某些字符或子串替换成指定的字符或子串（不区分大小写）。

#### 字符串截取
mb_substr() 函数用于在字符串中截取指定长度的子串（支持多字节字符）。
substr_replace() 函数用于将字符串中的某个子串替换成指定的字符串。

#### 字符串转换

mb_convert_encoding() 函数用于将字符串从一种字符编码转换为另一种字符编码。
iconv() 函数用于将字符串从一种字符编码转换为另一种字符编码。

#### 字符串比较
strcasecmp() 函数用于比较两个字符串的大小关系（不区分大小写）。
strncmp() 函数用于比较两个字符串的前n个字符的大小关系。

#### 字符串格式化
number_format() 函数用于将数字按照指定的格式进行格式化。
printf() 和 sprintf() 函数用于将字符串按照指定的格式进行格式化。

#### 其他字符串函数
ucfirst() 函数用于将字符串的第一个字符转换为大写。
lcfirst() 函数用于将字符串的第一个字符转换为小写。
str_shuffle() 函数用于随机打乱字符串中的字符顺序。
str_word_count() 函数用于统计字符串中的单词数。


